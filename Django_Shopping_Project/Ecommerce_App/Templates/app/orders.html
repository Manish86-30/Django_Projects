{% extends 'app/base.html' %}
{% load static %}
{% block title %}Buy Now{% endblock title %}
{% block main-content %}
<div class="container my-5">
  <div class="row">
    <h3>Welcome <span class="text-capitalize">{{ request.user }}</span></h3>

    <!-- Sidebar -->
    <div class="col-sm-2 border-end">
      <ul class="list-unstyled">
        <li class="d-grid">
          <a href="{% url 'orders' %}" class="btn btn-primary">Orders</a>
        </li>
      </ul>
    </div>

    <!-- Orders Section -->
    <div class="col-sm-9 offset-sm-1">
      {% for o in orders %}
      <div class="row shadow-sm mb-4 p-3">
        <div class="col-sm-2">
          <img src="{{ o.product.profile_image.url }}" alt="" class="img-fluid" height="150" width="150">
        </div>

        <div class="col-sm-7">
          <p><strong>Product:</strong> {{ o.product.title }}</p>
          <p><strong>Quantity:</strong> {{ o.quantity }}</p>
          <p><strong>Price:</strong> â‚¹{{ o.total_cost }}</p>
        </div>

        <div class="col-sm-3 fw-bold">
          <p>Order Status: {{ o.status }}</p>

          {% if o.status == 'Accepted' %}
          <div class="progress">
            <div class="progress-bar bg-warning" role="progressbar"
                 style="width: 20%" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100">
              Accepted
            </div>
          </div>

          {% elif o.status == 'Packed' %}
          <div class="progress">
            <div class="progress-bar bg-info" role="progressbar"
                 style="width: 40%" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100">
              Packed
            </div>
          </div>

          {% elif o.status == 'On The Way' %}
          <div class="progress">
            <div class="progress-bar bg-primary" role="progressbar"
                 style="width: 70%" aria-valuenow="70" aria-valuemin="0" aria-valuemax="100">
              On The Way
            </div>
          </div>

          {% elif o.status == 'Delivered' %}
          <div class="progress">
            <div class="progress-bar bg-success" role="progressbar"
                 style="width: 100%" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100">
              Delivered
            </div>
          </div>
          
          {% elif o.status == 'Pending' %}
          <div class="progress">
            <div class="progress-bar bg-secondary" role="progressbar"
            style="width: 10%" aria-valuenow="10" aria-valuemin="0" aria-valuemax="100">
            Pending
            </div>
           </div>
          

          {% else %}
          <span class="text-danger">Cancelled</span>
          {% endif %}
        </div>
      </div>
      {% empty %}
      <p>No orders found.</p>
      {% endfor %}
    </div>
  </div>
</div>
{% endblock main-content %}
